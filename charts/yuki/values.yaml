app:
  name: 'yuki-proxy'
  group: default-app-group
  replicaCount: 4
  container:
    image: 406122784773.dkr.ecr.us-east-1.amazonaws.com/yuki-proxy:0.0.254
    port: 5162
    env:
      ASPNETCORE_ENVIRONMENT: Prod
      COMPUTE_HOST: https://prod.yukicomputing.com
      SYSTEM_HOST: https://prod.yukicomputing.com
      SERILOG_DATADOG_ENABLED: true
      PROXY_HOST:
      REDIS_HOST:

# Additional environment variables from existing Kubernetes Secrets
#  envFromSecrets:
#    SECRET_ENV_VAR:
#      name: existing-secret-name
#      key: key-property

  service:
    type: NodePort
    port: 5162
    targetPort: 5162
    prometheus:
      enabled: false

serviceAccount:
  enabled: false

redisSecret:
  create: true

# External Secrets configuration for Snowflake user credentials
externalSecrets:
  enabled: false
  # Deploy external-secrets operator (for self-hosted mode)
  operator:
    enabled: false
  # SecretStores configuration (supports multiple AWS accounts / roles)
  # Example:
  # stores:
  #   default:
  #     type: secretsmanager
  #     region: us-east-1
  #     roleArn: arn:aws:iam::<ACCOUNT_ID>:role/YukiProxyReadKeysRole
  #   customer:
  #     type: secretsmanager
  #     region: us-east-1
  #     roleArn: arn:aws:iam::<CUSTOMER_ACCOUNT_ID>:role/YukiProxyReadKeysRole
  stores: {}
  
  # Snowflake user credentials configuration
  # Each user selects which store to use via the `store` field.
  users: []
  # Example configuration:
  # users:
  #   - username: user1
  #     store: default
  #     secretKey: /snowflake/users/user1/credentials  # Path to secret in AWS
  #     privateKeyProperty: private_key  # Property name for private key
  #     passphraseProperty: passphrase   # Optional: property name for passphrase
  #   - username: user2
  #     store: customer
  #     secretKey: /snowflake/users/user2/credentials
  #     privateKeyProperty: private_key
  #     # No passphrase for user2

hpa:
  enabled: true
  minReplicas: 5
  maxReplicas: 20
  targetCPUUtilizationPercentage: 90
  targetMemoryUtilizationPercentage: 70

ingress:
  enabled: false

resources:
  requests:
    memory: "300Mi"
    cpu: "250m"
  limits:
    memory: "600Mi"

affinity: { }
tolerations: [ ]

# Configuration for external-secrets subchart (when operator.enabled = true)
external-secrets:
  installCRDs: true
  replicaCount: 1
  serviceAccount:
    create: true
